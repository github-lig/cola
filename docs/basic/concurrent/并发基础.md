**进程和线程**  

进程是程序运行的最小单位，而线程是系统调度的最小单位。   
进程是操作系统分配资源的最小单位，包括内存，文件句柄以及安全证书等，进程之间的通信可通过套接字（socket），共享内存，信号处理器以及文件等。  
一个进程中在运行过程中会创建多个线程，一个线程就是在进程中的一个单一的顺序控制流。线程会共享进程范围内的资源，例如内存句柄和文件句柄，但每个线程都有各自的程序计数器，栈以及局部变量等。   

---

**并行、并发、串行** 
 
举个例子，假如有三个任务。同时在三个cpu核心运行这三个任务叫做并行；而我们同时启动三个任务，不论三个任务是同时在三个cpu核心上执行还是在一个cpu核心上交替执行，我们都可以称之为并发（这只是为了和并行区分开的一个例子，事实上，在程序运行过程中，我们一般无法预知程序会占用几个线程，我们一般可以称多线程编程为并发编程）；在一个cpu核心上依次执行三个任务叫做串行。

---

**上下文切换**   

即使是单核处理器也支持多线程代码的运行，cpu是通过给每个线程分配时间片来实现的。时间片是cpu分配给各个线程的时间，一般为几十毫秒。
  
cpu通过时间片分配算法来循环执行任务，当前任务执行一个时间片之后会切换到下一个任务。但是在切换之前会保存上一个任务的状态（保存在程序计数器中，线程私有），以便下次切换回这个任务的时候，可以再加载到这个任务的状态。任务从保存到再加载的过程就是一次上下文切换。  
由于Java的线程机制是抢占式的，所以我们有时会发现一个任务会连续占用多个时间片执行。  

我们可以通过对线程设置优先级将线程的重要性传递给调度器。尽管cpu处理现有线程集的顺序是不确定的，但是调度器倾向于让优先级最高的线程先执行，这并不意味着优先级较低的线程将得不到执行，而仅仅只是执行的频率较低。  
一般不建议操纵线程的优先级。

---
**多线程的好处**  

线程可以简化程序的设计、可以提升程序的响应速度、提高服务器的资源利用率和系统吞吐率。  
线程简化了JVM的实现，垃圾回收器通常在一个或者多个专门的线程中执行。

---
**多线程带来的问题**

线程安全性问题：在没有充分的同步的情况下，多个线程中的操作顺序是不可预测的，甚至会产生奇怪的结果。  

活跃性问题：活跃性关注的是“某件事情最终会发生”。当某个操作无法继续执行下去时，就会发生活跃性问题。  
比如在单线程程序中的死循环问题，多线程程序中的死锁问题。

性能问题：在设计良好的并发应用程序中，线程会提升程序的性能，但无论如何，线程总会带来某种程序的开销。  
比如线程上下文的切换、共享数据时的同步机制（同步机制有时会抑制某些编译器的优化，使内存缓冲区的数据无效，以及增加共享内存总线的同步流量）

