> 当多个线程访问某个类时，这个类始终都能表现出正确的行为，那么称这个类是线程安全的。  

当多个线程访问某个类时，不管运行时环境采用何种调用方式或者这些线程将如何交替执行，并且在主调代码中不需要任何额外的同步或协同，这个类都能表现出正确的行为，那么就称这个类是线程安全的。  

在线程安全的类中封装了必要的同步机制，因此客户端无需进一步采用同步措施。  

如果一开始就设计一个线程安全的类，那么比在之后再将这个类修改为线程安全的类要容易的多。  

程序的封装性越好，就越容易实现程序的线程安全性   

如果当多个线程访问同一个可变的状态变量时没有使用合适的同步，那么程序就会出现错误，有三种方式可以修复这个问题：  
	1. 不在线程之间共享该状态变量  
	2. 将状态变量修改为不可变的变量  
	3. 在访问状态变量时使用同步

要编写线程安全的代码，其核心在于要对状态访问操作进行管理，特别是对共享和可变状态的访问  

在对象的状态中包含了任何可能影响其外部可见行为的数据   

一个对象是否需要是线程安全的，取决于它是否被多个线程访问   

当多个线程访问某个状态变量并且其中有一个线程执行写入操作时，必须采用同步机制来协同这些线程对变量的访问   

无状态的对象一定是线程安全的   

竞态条件并不总是会产生错误，还需要某种不恰当的执行时序   

基于一种可能失效的观察结果来做出判断或执行某个计算。这种类型的竞态条件称为先检查后执行   

我们将先检查后执行和读取-修改-写入 等操作统称为符合操作：包含了一组必须以原子方式执行的操作以确保线程安全性   

要保证状态的一致性，就需要在单个原子操作中更新所有相关的状态变量   